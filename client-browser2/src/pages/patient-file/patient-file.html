<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>
      <div>
        <img class="img-avatar" src="https://www.gravatar.com/avatar/{{patient.emailHash}}?s=40&amp;d=mm">
        <span>Paciente - {{patient.id != null ? patient.name : ''}}</span>
        <ion-spinner class="loading-toolbar" *ngIf="isLoading"></ion-spinner>
      </div>
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only color="royal" (click)="presentPatientOptions()" *ngIf="isEditable()">
        <ion-icon name="more"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
  <ion-toolbar no-border-top>
    <ion-segment [(ngModel)]="page">
      <ion-segment-button value="contact">
        Dados principais
      </ion-segment-button>
      <ion-segment-button value="indication">
        Motivo de consulta e Indicação
      </ion-segment-button>
      <ion-segment-button value="additional">
        Informações adicionais
      </ion-segment-button>
      <ion-segment-button value="observations">
        Receituário
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>

</ion-header>

<ion-content padding [ngSwitch]="page">
    <form id="savePatientForm" (ngSubmit)="savePatient(patientForm)" #patientForm="ngForm">
          <ion-grid *ngSwitchCase="'contact'">
            <ion-row>
              <ion-item col-8>
                <ion-label floating>Nome do paciente(*)</ion-label>
                <ion-input type="text" name="name" [(ngModel)]="patient.name" required></ion-input>
              </ion-item>
              <ion-item col-4>
                <ion-label stacked>Última Consulta</ion-label>
                <ion-datetime displayFormat="DD/MM/YYYY h:mm A" pickerFormat="MM/DD/YYYY h mm A" name="lastAppointment" [(ngModel)]="patient.lastAppointment"></ion-datetime>
              </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-8>
                  <ion-label floating>CPF(*)</ion-label>
                  <ion-input type="text" name="taxIdNumber" [(ngModel)]="patient.taxIdNumber" required></ion-input>
                </ion-item>
                <ion-item col-4>
                  <ion-label stacked>Data de nascimento</ion-label>
                  <ion-datetime displayFormat="DD/MM/YYYY" pickerFormat="MM/DD/YYYY" name="birthDate" [(ngModel)]="patient.birthDate"></ion-datetime>
              </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-8>
                  <ion-label floating>RG</ion-label>
                  <ion-input type="text" name="registrationNumber" [(ngModel)]="patient.registrationNumber"></ion-input>
                </ion-item>
                <ion-item col-4>
                  <ion-label floating>Sexo</ion-label>
                  <ion-select name="gender" [(ngModel)]="patient.gender">
                    <ion-option value="m">Masculino</ion-option>
                    <ion-option value="f">Feminino</ion-option>
                  </ion-select>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-8>
                  <ion-label floating>Convênio(*)</ion-label>
                  <ion-input type="text" name="medicalInsurance" [(ngModel)]="patient.medicalInsurance" required></ion-input>
                </ion-item>
                <ion-item col-4>
                  <ion-label floating>Situação</ion-label>
                  <ion-select name="status" [(ngModel)]="patient.status">
                    <ion-option>Ativo</ion-option>
                    <ion-option>Inativo</ion-option>
                  </ion-select>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-4>
                  <ion-label floating>Estado civil</ion-label>
                  <ion-select name="maritalStatus" [(ngModel)]="patient.maritalStatus">
                    <ion-option>Solteiro(a)</ion-option>
                    <ion-option>Casado(a)</ion-option>
                    <ion-option>Divorciado(a)</ion-option>
                    <ion-option>Separado(a)</ion-option>
                  </ion-select>
                </ion-item>
                <ion-item col-8>
                  <ion-label floating>Cônjuge</ion-label>
                  <ion-input type="text" name="spouse" [(ngModel)]="patient.spouse"></ion-input>
                </ion-item>
            </ion-row>
            <br>
            <br>
            <h5>Telefones e e-mail</h5>
            <ion-row>
                <ion-item col-12>
                  <ion-label floating>E-mail</ion-label>
                  <ion-input type="email" name="email" [(ngModel)]="patient.email"></ion-input>
                </ion-item>
            </ion-row>
            <ion-row>    
              <ion-item col-6>
                <ion-label floating>Celular</ion-label>
                <ion-input type="text" name="phoneNumber" [(ngModel)]="patient.phoneNumber"></ion-input>
              </ion-item>
                <ion-item col-6>
                  <ion-label floating>Residencial</ion-label>
                  <ion-input type="text" name="residentialPhoneNumber" [(ngModel)]="patient.residentialPhoneNumber"></ion-input>
                </ion-item>
                <ion-item col-6>
                  <ion-label floating>Comercial</ion-label>
                  <ion-input type="text" name="commercialPhoneNumber" [(ngModel)]="patient.commercialPhoneNumber"></ion-input>
                </ion-item>
                <ion-item col-6>
                  <ion-label floating>Contato</ion-label>
                  <ion-input type="text" name="contactPhoneNumber" [(ngModel)]="patient.contactPhoneNumber"></ion-input>
                </ion-item>
            </ion-row>
            <br>
            <br>
            <h5>Mídias sociais</h5>
            <ion-row>
                <ion-item col-2>
                  <ion-label floating>Tipo</ion-label>
                  <ion-select name="socialMediaType" [(ngModel)]="patient.socialMediaType">
                    <ion-option>Facebook</ion-option>
                    <ion-option>WhatsApp</ion-option>
                    <ion-option>Twitter</ion-option>
                    <ion-option>LinkedIn</ion-option>
                    <ion-option>Google+</ion-option>
                    <ion-option>Outro</ion-option>
                  </ion-select>
                </ion-item>
                <ion-item col-4>
                  <ion-label floating>Endereço</ion-label>
                  <ion-input type="text" name="socialMediaAddress" [(ngModel)]="patient.socialMediaAddress"></ion-input>
                </ion-item>
                <ion-item col-2>
                  <ion-label floating>Tipo</ion-label>
                  <ion-select name="socialMediaType2" [(ngModel)]="patient.socialMediaType2">
                    <ion-option>Facebook</ion-option>
                    <ion-option>WhatsApp</ion-option>
                    <ion-option>Twitter</ion-option>
                    <ion-option>LinkedIn</ion-option>
                    <ion-option>Google+</ion-option>
                    <ion-option>Outro</ion-option>
                  </ion-select>
                </ion-item>
                <ion-item col-4>
                  <ion-label floating>Endereço</ion-label>
                  <ion-input type="text" name="socialMediaType2Address" [(ngModel)]="patient.socialMediaType2Address"></ion-input>
                </ion-item>
            </ion-row>
            <br>
            <br>
            <h5>Endereço</h5>
            <ion-row>
                <ion-item col-6>
                  <ion-label floating>CEP</ion-label>
                  <ion-input type="text" name="zipCode" [(ngModel)]="patient.zipCode"></ion-input>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-12>
                  <ion-label floating>Endereço</ion-label>
                  <ion-input type="text" name="address" [(ngModel)]="patient.address"></ion-input>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-12>
                  <ion-label floating>Complemento</ion-label>
                  <ion-input type="text" name="addressComplement" [(ngModel)]="patient.addressComplement"></ion-input>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-4>
                  <ion-label floating>Bairro</ion-label>
                  <ion-input type="text" name="neighborhood" [(ngModel)]="patient.neighborhood"></ion-input>
                </ion-item>
                <ion-item col-4>
                  <ion-label floating>Cidade</ion-label>
                  <ion-input type="text" name="city" [(ngModel)]="patient.city"></ion-input>
                </ion-item>
                <ion-item col-4>
                  <ion-label floating>Estado</ion-label>
                  <ion-select name="state" [(ngModel)]="patient.state">
                    <ion-option>AC</ion-option>
                    <ion-option>AL</ion-option>
                    <ion-option>AM</ion-option>
                    <ion-option>AP</ion-option>
                    <ion-option>BA</ion-option>
                    <ion-option>CE</ion-option>
                    <ion-option>DF</ion-option>
                    <ion-option>ES</ion-option>
                    <ion-option>GO</ion-option>
                    <ion-option>MA</ion-option>
                    <ion-option>MG</ion-option>
                    <ion-option>MS</ion-option>
                    <ion-option>MT</ion-option>
                    <ion-option>PA</ion-option>
                    <ion-option>PB</ion-option>
                    <ion-option>PE</ion-option>
                    <ion-option>PI</ion-option>
                    <ion-option>PR</ion-option>
                    <ion-option>RJ</ion-option>
                    <ion-option>RN</ion-option>
                    <ion-option>RO</ion-option>
                    <ion-option>RR</ion-option>
                    <ion-option>RS</ion-option>
                    <ion-option>SC</ion-option>
                    <ion-option>SE</ion-option>
                    <ion-option>SP</ion-option>
                    <ion-option>TO</ion-option>
                  </ion-select>
                </ion-item>
            </ion-row>
            <br>
            <br>
            <h5>Dados do responsável</h5>
            <ion-row>
                <ion-item>
                  <ion-label floating>Nome do responsável</ion-label>
                  <ion-input type="text" name="accountablePerson" [(ngModel)]="patient.accountablePerson"></ion-input>
                </ion-item>
            </ion-row>
            <ion-row>
                <ion-item col-6>
                  <ion-label floating>CPF</ion-label>
                  <ion-input type="text" name="accountablePersonTaxIdNumber" [(ngModel)]="patient.accountablePersonTaxIdNumber"></ion-input>
                </ion-item>
                <ion-item col-6>
                  <ion-label floating>RG</ion-label>
                  <ion-input type="text" name="accountablePersonRegistrationNumber" [(ngModel)]="patient.accountablePersonRegistrationNumber"></ion-input>
                </ion-item>
            </ion-row>
          </ion-grid>
          <ion-grid *ngSwitchCase="'indication'">
            <ion-row>
              <ion-list col-12>
                <ion-list-header>
                  Motivo da consulta
                  <button type="button" ion-button icon-only clear item-right (click)="addAppointmentMotivation()">
                    <ion-icon name="add"></ion-icon>
                  </button>
                </ion-list-header>
                <ion-item *ngFor="let m of patient.appointmentMotivation">
                  <button type="button" ion-button icon-only clear item-left (click)="removeAppointmentMotivation(m)">
                    <ion-icon name="close"></ion-icon>
                  </button>
                  {{m.description}}
                </ion-item>
              </ion-list>
            </ion-row>
            <br>
            <br>
            <ion-row>
              <ion-list col-12>
                <ion-list-header>
                  Indicação
                  <button type="button" ion-button icon-only clear item-right (click)="addAppointmentIndication()">
                    <ion-icon name="add"></ion-icon>
                  </button>
                </ion-list-header>                
                <ion-item *ngFor="let m of patient.appointmentIndication">
                  <button type="button" ion-button icon-only clear item-left (click)="removeAppointmentIndication(m)">
                    <ion-icon name="close"></ion-icon>
                  </button>
                  {{m.description}}
                </ion-item>
              </ion-list>
            </ion-row>
          </ion-grid>
          <ion-grid *ngSwitchCase="'additional'">
            <h5>Dados profissionais</h5>
            <ion-row>
              <ion-item col-12>
                <ion-label floating>Profissão</ion-label>
                <ion-input type="text" name="profession" [(ngModel)]="patient.profession"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-6>
                <ion-label floating>CEP</ion-label>
                <ion-input type="text" name="commercialZipCode" [(ngModel)]="patient.commercialZipCode"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-12>
                <ion-label floating>Endereço</ion-label>
                <ion-input type="text" name="commercialAddress" [(ngModel)]="patient.commercialAddress"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-6>
                <ion-label floating>Complemento</ion-label>
                <ion-input type="text" name="commercialComplement" [(ngModel)]="patient.commercialAddressComplement"></ion-input>
              </ion-item>
              <ion-item col-6>
                <ion-label floating>Bairro</ion-label>
                <ion-input type="text" name="commercialNeighboorhood" [(ngModel)]="patient.commercialAddressNeighboorhood"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-6>
                <ion-label floating>Cidade</ion-label>
                <ion-input type="text" name="commercialCity" [(ngModel)]="patient.commercialCity"></ion-input>
              </ion-item>
              <ion-item col-6>
                <ion-label floating>Estado</ion-label>
                <ion-input type="text" name="commercialState" [(ngModel)]="patient.commercialState"></ion-input>
              </ion-item>
            </ion-row>
            <br>
            <br>
            <h5>Informações adicionais</h5>
            <ion-row>
              <ion-item col-12>
                <ion-label floating>Mãe</ion-label>
                <ion-input type="text" name="motherName" [(ngModel)]="patient.motherName"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-6>
                <ion-label floating>Profissão</ion-label>
                <ion-input type="text" name="motherProfession" [(ngModel)]="patient.motherProfession"></ion-input>
              </ion-item>
              <ion-item col-6>
                <ion-label floating>Telefone</ion-label>
                <ion-input type="text" name="motherPhoneNumber" [(ngModel)]="patient.motherPhoneNumber"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-12>
                <ion-label floating>Pai</ion-label>
                <ion-input type="text" name="fatherName" [(ngModel)]="patient.fatherName"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item col-6>
                <ion-label floating>Profissão</ion-label>
                <ion-input type="text" name="fatherProfession" [(ngModel)]="patient.fatherProfession"></ion-input>
              </ion-item>
              <ion-item col-6>
                <ion-label floating>Telefone</ion-label>
                <ion-input type="text" name="fatherPhoneNumber" [(ngModel)]="patient.fatherPhoneNumber"></ion-input>
              </ion-item>
            </ion-row>
            <ion-row>
              <ion-item>
                <ion-label floating>Informações adicionais</ion-label>
                <ion-textarea rows="4" name="observations" [(ngModel)]="patient.observations"></ion-textarea>
              </ion-item>
            </ion-row>
          </ion-grid>
          <ion-grid *ngSwitchCase="'observations'">
            <ion-row>
              <ion-item>
                <ion-label floating>Observações do paciente</ion-label>
                <ion-textarea rows="3" name="medicalObservations" [(ngModel)]="patient.medicalObservations"></ion-textarea>
              </ion-item>
            </ion-row>
            <ion-row>
              <h5>
                <br>
                <br>&nbsp;&nbsp;&nbsp;&nbsp;Receita
              </h5>
              <ion-item>
                <ckeditor name="medicalReceipt"
                  [(ngModel)]="patient.medicalReceipt"
                  [config]="{language: 'pt', toolbar : 'Basic'}">
                </ckeditor>
              </ion-item>
            </ion-row>
          </ion-grid>
    </form>


                
</ion-content>


<ion-footer>
  <ion-toolbar>
    <ion-buttons end>
      <button type="submit" ion-button form="savePatientForm">
        <ion-icon name="checkmark"></ion-icon>&nbsp;&nbsp;Gravar dados
      </button>
      <button type="button" ion-button (click)="close()">
        <ion-icon name="close"></ion-icon>&nbsp;&nbsp;Cancelar
      </button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
